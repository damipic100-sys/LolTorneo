<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ladderboard Torneo LoL</title>
<style>
  body { font-family: Arial; background: #12122b; color: #fff; margin: 0; padding: 0; }
  header { background: #2a2a50; padding: 1rem; text-align: center; font-size: 1.8rem; font-weight: bold; }
  main { max-width: 900px; margin: auto; padding: 1rem; }
  table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
  th, td { padding: 0.75rem; text-align: left; }
  th { background: #1f1f40; }
  tr:nth-child(even) { background: #1b1b35; }
  tr:hover { background: #2a2a50; }
  .tier-IRON { color: #a0a0a0; }
  .tier-BRONZE { color: #cd7f32; }
  .tier-SILVER { color: #c0c0c0; }
  .tier-GOLD { color: #ffd700; }
  .tier-PLATINUM { color: #00e5ee; }
  .tier-DIAMOND { color: #00bfff; }
  .tier-MASTER { color: #9400d3; }
  .tier-GRANDMASTER { color: #ff4500; }
  .tier-CHALLENGER { color: #ff0000; }
</style>
</head>
<body>

<header>Ladderboard Torneo LoL</header>
<main>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Jugador</th>
        <th>Elo</th>
        <th>Rank</th>
        <th>Wins</th>
        <th>Losses</th>
      </tr>
    </thead>
    <tbody id="ladder"></tbody>
  </table>
</main>

<script>
const players = [
  {summonerName: "Jugador1", region: "na1"},
  {summonerName: "Jugador2", region: "na1"},
  {summonerName: "Jugador3", region: "na1"}
];

const tierOrder = ["IRON","BRONZE","SILVER","GOLD","PLATINUM","DIAMOND","MASTER","GRANDMASTER","CHALLENGER"];
const ladder = document.getElementById("ladder");

async function fetchPlayerData(summonerName, region) {
  try {
    const res = await fetch(`/api/player/${region}/${summonerName}`);
    if (!res.ok) return { summonerName, tier: "ERROR", rank: "", wins: 0, losses: 0 };
    return await res.json();
  } catch(e) {
    return { summonerName, tier: "ERROR", rank: "", wins: 0, losses: 0 };
  }
}

async function updateLadder() {
  ladder.innerHTML = "";
  const results = await Promise.all(players.map(p => fetchPlayerData(p.summonerName, p.region)));
  // Ordenar por tier
  results.sort((a,b) => tierOrder.indexOf(b.tier) - tierOrder.indexOf(a.tier));

  results.forEach((p,i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${p.summonerName}</td>
      <td class="tier-${p.tier}">${p.tier}</td>
      <td>${p.rank}</td>
      <td>${p.wins}</td>
      <td>${p.losses}</td>
    `;
    ladder.appendChild(tr);
  });
}

// Inicial y refresco autom√°tico
updateLadder();
setInterval(updateLadder, 60000); // cada 60s
</script>

</body>
</html>
